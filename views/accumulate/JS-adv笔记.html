<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>JS-adv笔记 | Dust の blog</title>
    <meta name="description" content="种一棵树最好的时间是十年前，其次是现在">
    <link rel="icon" href="/Blog/favicon.ico">
  <meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
    
    <link rel="preload" href="/Blog/assets/css/0.styles.8c347e2e.css" as="style"><link rel="preload" href="/Blog/assets/js/app.a66dfa13.js" as="script"><link rel="preload" href="/Blog/assets/js/5.3af05e9e.js" as="script"><link rel="preload" href="/Blog/assets/js/1.b259d1a7.js" as="script"><link rel="preload" href="/Blog/assets/js/11.0d7f9ba6.js" as="script"><link rel="prefetch" href="/Blog/assets/js/10.439b12de.js"><link rel="prefetch" href="/Blog/assets/js/12.eced248a.js"><link rel="prefetch" href="/Blog/assets/js/13.511028e6.js"><link rel="prefetch" href="/Blog/assets/js/14.0f25376e.js"><link rel="prefetch" href="/Blog/assets/js/15.38d852f8.js"><link rel="prefetch" href="/Blog/assets/js/16.3442ad82.js"><link rel="prefetch" href="/Blog/assets/js/17.c549cd6d.js"><link rel="prefetch" href="/Blog/assets/js/18.a77164f4.js"><link rel="prefetch" href="/Blog/assets/js/19.d8d9ba0d.js"><link rel="prefetch" href="/Blog/assets/js/20.777ce9fd.js"><link rel="prefetch" href="/Blog/assets/js/21.49fff4d7.js"><link rel="prefetch" href="/Blog/assets/js/22.28847594.js"><link rel="prefetch" href="/Blog/assets/js/23.47514db3.js"><link rel="prefetch" href="/Blog/assets/js/24.dc4ed03a.js"><link rel="prefetch" href="/Blog/assets/js/25.dc023c98.js"><link rel="prefetch" href="/Blog/assets/js/26.ff9cf69b.js"><link rel="prefetch" href="/Blog/assets/js/27.b2bf5d54.js"><link rel="prefetch" href="/Blog/assets/js/28.8622c17d.js"><link rel="prefetch" href="/Blog/assets/js/3.f3e7dc71.js"><link rel="prefetch" href="/Blog/assets/js/4.f59572fd.js"><link rel="prefetch" href="/Blog/assets/js/6.106d7d9e.js"><link rel="prefetch" href="/Blog/assets/js/7.eaed2d67.js"><link rel="prefetch" href="/Blog/assets/js/8.83fc2d2c.js"><link rel="prefetch" href="/Blog/assets/js/9.43617916.js">
    <link rel="stylesheet" href="/Blog/assets/css/0.styles.8c347e2e.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div><div class="theme-container"><div><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/Blog/" class="home-link router-link-active"><img src="/Blog/head.png" alt="Dust の blog" class="logo"> <span class="site-name">Dust の blog</span></a> <div class="links"><div class="color-picker"><a href="#" class="color-button"><i class="iconfont reco-color"></i></a> <div class="color-picker-menu" style="display:none;"><div class="theme-options"><!----> <div class="dark-theme-options toggle-option"><label for="dark-theme-toggle">Enable Dark Theme?</label> <input id="dark-theme-toggle" type="checkbox" checked="checked"></div></div></div></div> <div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/Blog/views/accumulate/JavaScript笔记.html" class="nav-link"><i class="iconfont reco-home"></i>
  积累
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/category/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/advance.html" class="nav-link"><i class="iconfont undefined"></i>
  advance
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/interview.html" class="nav-link"><i class="iconfont undefined"></i>
  interview
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/思考题.html" class="nav-link"><i class="iconfont undefined"></i>
  思考题
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Blog/views/interview/相互比较呀.html" class="nav-link"><i class="iconfont reco-other"></i>
  interview
</a></div><div class="nav-item"><a href="/Blog/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <a href="https://github.com/lichiaos/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/Blog/views/accumulate/JavaScript笔记.html" class="nav-link"><i class="iconfont reco-home"></i>
  积累
</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title"><i class="iconfont reco-category"></i>
      Category
    </span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Blog/category/CSS.html" class="nav-link"><i class="iconfont undefined"></i>
  CSS
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/frontEnd.html" class="nav-link"><i class="iconfont undefined"></i>
  frontEnd
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/advance.html" class="nav-link"><i class="iconfont undefined"></i>
  advance
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/interview.html" class="nav-link"><i class="iconfont undefined"></i>
  interview
</a></li><li class="dropdown-item"><!----> <a href="/Blog/category/思考题.html" class="nav-link"><i class="iconfont undefined"></i>
  思考题
</a></li></ul></div></div><div class="nav-item"><a href="/Blog/tag/" class="nav-link"><i class="iconfont reco-tag"></i>
  Tag
</a></div><div class="nav-item"><a href="/Blog/views/interview/相互比较呀.html" class="nav-link"><i class="iconfont reco-other"></i>
  interview
</a></div><div class="nav-item"><a href="/Blog/timeLine/" class="nav-link"><i class="iconfont reco-date"></i>
  时间轴
</a></div> <a href="https://github.com/lichiaos/Blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>基础</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/views/accumulate/JavaScript笔记.html" class="sidebar-link">JavaScript笔记</a></li><li><a href="/Blog/views/accumulate/git常用命令.html" class="sidebar-link">git命令合集</a></li><li><a href="/Blog/views/accumulate/读书笔记.html" class="sidebar-link">ReadNotes</a></li><li><a href="/Blog/views/accumulate/CSS相关.html" class="sidebar-link">CSS相关</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>进阶</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/views/accumulate/JS-adv笔记.html" class="active sidebar-link">JS-adv笔记</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#执行上下文" class="sidebar-link">执行上下文</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#作用域" class="sidebar-link">作用域</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#this" class="sidebar-link">this</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#函数" class="sidebar-link">函数</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#原型" class="sidebar-link">原型</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#闭包" class="sidebar-link">闭包</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#内存空间" class="sidebar-link">内存空间</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#事件轮循" class="sidebar-link">事件轮循</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#面向对象" class="sidebar-link">面向对象</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#创建对象的多种方式" class="sidebar-link">创建对象的多种方式</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#函数防抖节流" class="sidebar-link">函数防抖节流</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#compose函数" class="sidebar-link">compose函数</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#缓存函数" class="sidebar-link">缓存函数</a></li><li class="sidebar-sub-header"><a href="/Blog/views/accumulate/JS-adv笔记.html#柯里化函数" class="sidebar-link">柯里化函数</a></li></ul></li><li><a href="/Blog/views/accumulate/源码分析.html" class="sidebar-link">源码分析</a></li><li><a href="/Blog/views/accumulate/算法结构.html" class="sidebar-link">算法结构</a></li><li><a href="/Blog/views/accumulate/设计模式.html" class="sidebar-link">设计模式</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>拓展</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Blog/views/accumulate/移动端.html" class="sidebar-link">移动端开发</a></li><li><a href="/Blog/views/accumulate/常用utils.html" class="sidebar-link">常用utils</a></li><li><a href="/Blog/views/accumulate/奇淫巧技.html" class="sidebar-link">奇淫巧技</a></li></ul></section></li></ul> </aside> <div><main class="page reco-hide"> <div class="page-title"><h1>JS-adv笔记</h1> <hr> <div data-v-0b496ca7><i class="iconfont reco-account" data-v-0b496ca7><span data-v-0b496ca7>dustSmile</span></i> <i class="iconfont reco-date" data-v-0b496ca7><span data-v-0b496ca7>2019-7-24</span></i> <span id="/Blog/views/accumulate/JS-adv%E7%AC%94%E8%AE%B0.html" data-flag-title="Your Article Title" class="leancloud-visitors" data-v-2e99e05a data-v-0b496ca7><i class="iconfont reco-eye" style="margin-right: .5rem" data-v-2e99e05a></i> <a class="leancloud-visitors-count" style="font-size:.9rem;font-weight:normal;color:#999;" data-v-2e99e05a></a></span> <i class="iconfont reco-tag tags" data-v-0b496ca7><span class="tag-item" data-v-0b496ca7>
      adv
    </span></i></div></div> <div class="content default"><h2 id="执行上下文"><a href="#执行上下文" aria-hidden="true" class="header-anchor">#</a> 执行上下文</h2> <div class="tip custom-block"><p class="custom-block-title">前言</p> <p>JS引擎在执行过程中分为三个阶段</p> <ol><li>词法分析(分析代码块语法是否正确, 如果不正确, 则向外抛出一个<code>语法错误(SyntaxError)</code></li> <li>预编译阶段(执行上下文)</li> <li>执行阶段(执行上下文栈)</li></ol></div> <blockquote><p>定义: 在代码执行之前要进行一些'准备工作',这些准备工作就包括以下:</p></blockquote> <ol><li>变量 , 函数表达式--变量声明,默认赋值为undefined</li> <li>this--赋值</li> <li>函数声明--赋值</li></ol> <ul><li><strong>这三种数据的准备情况我们称之为&quot;执行上下文&quot;或者是&quot;执行上下文环境&quot;</strong> <ul><li>通俗点就是在代码执行之前把用到的变量拿出来,挨个赋值,没有直接赋值的就用undefined占个空</li></ul></li></ul> <p><strong>JavaScript的三种运行环境:</strong></p> <ul><li>全局环境:JavaScript代码运行起来首先会进入该环境, 也就是<code>window</code>对象, <code>this</code>指向这个全局对象.</li> <li>函数环境 :当函数被调用时,会进入当前函数中执行代码</li> <li>eval: 指的是运行<code>eval</code>函数中的代码</li></ul> <p>执行上下文可以理解为当前的代码的<strong>执行环境</strong>,他会形成作用域,运行环境也分为大致上面三种</p> <p><strong>执行上下文的两个阶段:</strong></p> <ul><li><strong>创建阶段</strong> <ul><li>执行上下文会分别创建<code>变量对象</code>,建立<code>作用域链</code>,以及确定<code>this</code>的指向.</li></ul></li> <li><strong>代码执行阶段</strong> <ul><li>这个阶段就会进行变量赋值,函数引用</li></ul></li></ul> <p>在函数<strong>没有</strong>调用的时候并不会创建上下文.</p> <div class="tip custom-block"><p class="custom-block-title">问题</p> <p>变量对象和活跃对象有什么区别 ?</p> <p>他们其实是一个对象,只是所处的执行上下文阶段不同,活跃对象指的是哪个处于函数调用栈顶的变量对象
另: 函数表达式是不包含在VO对象中的</p></div> <h3 id="补充"><a href="#补充" aria-hidden="true" class="header-anchor">#</a> 补充:</h3> <p>​	<strong>变量对象(Variable Object):</strong></p> <p>1.建立arguments对象,检查当前上下文的参数,建立该对象下的属性,和属性值</p> <p>2.检查 当前上下文函数声明,在变量对象中以函数名建立一个属性,属性值为指向该函数所在地址值的引用.若已存在,会被新的引用覆盖</p> <p>3.检查变量声明,每找到一个变量声明,就会以变量名建立一个属性,属性值为undefined.</p> <h3 id="执行上下文栈"><a href="#执行上下文栈" aria-hidden="true" class="header-anchor">#</a> 执行上下文栈</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    fn<span class="token punctuation">,</span>
    <span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">var</span> b <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>
            <span class="token function">fn</span><span class="token punctuation">(</span>x <span class="token operator">+</span> b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">y</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">;</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>y <span class="token operator">+</span> c<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>每次调用函数都会创建上下文环境,当函数调用完之后,上下文环境的数据就会销毁,但是处于活跃状态的上下文环境只有一个,这其实是一个压栈和出栈的过程,称之为执行上下文栈</strong></p> <p>以上都是处于理想状态,但是有一种情况不会再函数执行完之后就销毁,其中就有闭包的产生</p> <p>本来一个函数执行完就应该被销毁,但是如果这个函数内部的函数引用了他作用域中上下文环境中的变量</p> <h2 id="作用域"><a href="#作用域" aria-hidden="true" class="header-anchor">#</a> 作用域</h2> <p><strong>定义:</strong></p> <p><strong>引子:</strong> 编程语言都有的能力储存变量---访问---修改,储存在哪?----怎么去找????------所有指定了一套良好的规则,来储存变量,方便访问查找,这套规则就是作用域.</p> <div class="tip custom-block"><ol><li>js中没有块级作用域</li> <li>作用域和自由变量息息相关</li></ol></div> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> name <span class="token operator">=</span> <span class="token string">'tom'</span>
<span class="token punctuation">}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>name<span class="token punctuation">)</span> <span class="token comment">// tom</span>
</code></pre></div><ul><li><strong>作用域</strong> <ul><li>我们将作用域定义为一套<strong>规则,<strong>这套规则规定了如何在当前作用域以及他嵌套的子作用域中根据</strong>标识符</strong>进行变量查找(在其创建的执行上下文环境中查找)</li> <li><strong>作用</strong>: 隔离变量,以免造成变量冲突</li> <li><strong>怎样查找:</strong> 在其创建变量的作用域中查找,也就是静态作用域.</li></ul></li> <li><strong>作用域链:</strong> <ul><li>有当前的执行环境和上层执行环境的一系列<strong>变量对象</strong>组成,它保证了当前执行环境对<strong>符合访问权限</strong>的变量和函数的<strong>有序访问</strong></li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code>JavaScript代码的执行过程分为两个阶段<span class="token punctuation">,</span>
   <span class="token number">1.</span>  代码编译阶段
       	<span class="token template-string"><span class="token string">`词法分析
		语法分析
		可执行代码生成
		作用域规则确定`</span></span>
   <span class="token number">2.</span>  代码执行阶段<span class="token punctuation">.</span>
		<span class="token template-string"><span class="token string">`执行上下创建
		代码执行
		垃圾回收`</span></span>
</code></pre></div><ol><li><p>执行环境有全局执行环境和函数执行环境之分;</p></li> <li><p>每次进入一个新的执行环境都会创建一个用于搜索变量和函数的作用域链;</p></li> <li><p>函数的局部环境不仅可以函数作用域中的环境,还可访问父环境,甚至是全局环境.</p></li> <li><p>但是全局环境只能访问全局环境,而不能访问局部环境中的变量;</p></li> <li><p>变量的执行环境有助于确定何时释放内存.</p> <ul><li><u>js是一门具有自动垃圾收集机制的编程语言.</u></li></ul> <p>离开作用域的值将被自动标记为可以回收,因此将在垃圾收集期间被删除.</p> <p><strong>作用:</strong> ==作用域最大的用处就是隔离变量,不同作用域下同名变量不会有冲突.==</p> <p><strong>拓展:</strong></p></li></ol> <p><strong>静态作用域与动态作用域</strong></p> <ul><li>因为 JavaScript 采用的是词法作用域，函数的作用域在函数定义的时候就决定了。</li> <li>而与词法作用域相对的是动态作用域，函数的作用域是在函数调用的时候才决定的。</li></ul> <h2 id="this"><a href="#this" aria-hidden="true" class="header-anchor">#</a> this</h2> <p>本质上来说,在js里this是一个指向函数执行环境的指针.this永远指向最后调用他的对象,并且在执行时才能获取值,</p> <p><strong>在函数中this如何取值是在其<code>调用</code>的时候确定的,函数定义的时候确定不了</strong>,this得取值是上下文环境的一部分,每次调用函数,都会产生一个新的执行上下文环境.</p> <ol><li>默认绑定
<ul><li>直接通过函数名调用</li> <li>this就是window.</li></ul></li> <li>隐式绑定
<ul><li>obj.foo()</li> <li>this 就是前面的这个对象.</li></ul></li></ol> <h3 id="this取值的四种情况"><a href="#this取值的四种情况" aria-hidden="true" class="header-anchor">#</a> this取值的四种情况</h3> <ol><li><strong>构造函数</strong>: 如果函数作为构造函数来用的,this指的就是它即将new出来的对象.</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
   <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'DustSmile'</span><span class="token punctuation">;</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token string">'20'</span>
    
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>  <span class="token comment">//Foo {name: Dustsmile, age: 20}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> 	
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// Dustsmile</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn1<span class="token punctuation">.</span>age<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//20</span>

<span class="token operator">--</span>如果在不是newFoo而是直接调用Foo<span class="token operator">--</span>
<span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">//this:  window</span>
</code></pre></div><ol><li><p><strong>函数作为对象的一个属性</strong> :如果函数作为对象的一个属性,并且作为对象的一个<strong>属性被调用时</strong>,函数中的this指向该对象.</p> <p>如果函数独立调用,那么函数内部的this则指向undefined,但是在<strong>非严格模式</strong>下他指向全局对象</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x <span class="token punctuation">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span> <span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> fn1 <span class="token operator">=</span> obj<span class="token punctuation">.</span>fn<span class="token punctuation">;</span>
<span class="token function">fn1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//fn 函数被赋值给了一个新的变量,this不在指向原来的那个对象</span>
<span class="token comment">//所以this指向window   this.x 等于undefined</span>
</code></pre></div><p>3.<strong>函数用call或者apply调用</strong></p> <ul><li>是JavaScript内部提供的一种机制,所有函数都具有这两个方法,他们第一个参数都为this要指向的对象.其中call挨个传递,apply是以数组的形式.</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
    x <span class="token punctuation">:</span><span class="token number">10</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
x <span class="token punctuation">:</span> <span class="token number">22</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>  	<span class="token comment">// {x : 10;}</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>x<span class="token punctuation">)</span><span class="token punctuation">;</span>	<span class="token comment">//10;</span>
<span class="token punctuation">}</span>
<span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>4.<strong>全局&amp;调用普通函数</strong></p> <p>在全局环境下,this永远指代window.</p> <div class="language- extra-class"><pre class="language-text"><code>var obj = {
    x : 10,
    fn : function(){
        function f(){
            console.log(this);  	//window 
            console.log(this.x); 	//undefined;
        }
        f();
    }
};
obj.fn();
</code></pre></div></li></ol> <h3 id="补充-2"><a href="#补充-2" aria-hidden="true" class="header-anchor">#</a> 补充:</h3> <p>​	<strong><strong>this丢失</strong></strong>:</p> <p>在函数调用的时候,并没有上下文对象,只是对函数的引用</p> <h3 id="this的应用场景"><a href="#this的应用场景" aria-hidden="true" class="header-anchor">#</a> this的应用场景</h3> <p><strong>【场景1】全局环境中的this指向全局对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">this</span><span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
b <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span>
<span class="token keyword">var</span> c <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>
<span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>c<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//30</span>
</code></pre></div><p><strong>【场景2】对象内部函数的this指向调用函数的当前对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span> <span class="token punctuation">{</span>
 a<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
 <span class="token function-variable function">test</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
bar<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span>
</code></pre></div><p><strong>【场景3】全局环境函数的this指向全局对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
</code></pre></div><p><strong>【场景4】匿名函数中的this指向全局对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
 a<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
 fn<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
foo<span class="token punctuation">.</span>fn<span class="token comment">//10</span>
</code></pre></div><p><strong>【场景5】setInterval和setTimeout定时器中的this指向全局对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> oTimer1 <span class="token operator">=</span> <span class="token function">setInterval</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span>
 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10</span>
 <span class="token function">clearInterval</span><span class="token punctuation">(</span>oTimer1<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">100</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>【场景6】eval中的this指向调用上下文中的this</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;alert(this)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Window]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">eval</span><span class="token punctuation">(</span><span class="token string">&quot;alert(this)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Object]</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>【场景7】构造函数中的this指向构造出的新对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Person</span><span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span>age</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span>age <span class="token operator">=</span> age<span class="token punctuation">;</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">sayName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Person</span><span class="token punctuation">(</span><span class="token string">'lily'</span><span class="token punctuation">,</span><span class="token string">'20'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
p1<span class="token punctuation">.</span><span class="token function">sayName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//'lily'</span>
</code></pre></div><p><strong>【场景8】new Function中的this指向全局对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;alert(this)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Window]</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
 <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function-variable function">bar</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token keyword">var</span> f <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Function</span><span class="token punctuation">(</span><span class="token string">&quot;alert(this)&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//[object Window]</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><strong>【场景9】apply和call中的this指向参数中的对象</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> foo <span class="token operator">=</span> <span class="token punctuation">{</span>
 a<span class="token punctuation">:</span> <span class="token number">20</span><span class="token punctuation">,</span>
 <span class="token function-variable function">fn</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token function">alert</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> bar <span class="token operator">=</span><span class="token punctuation">{</span>
 a<span class="token punctuation">:</span> <span class="token number">30</span>
<span class="token punctuation">}</span>
foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//10(若参数为空，默认指向全局对象)</span>
foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>foo<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//20</span>
foo<span class="token punctuation">.</span><span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span>bar<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//30</span>
</code></pre></div><h2 id="函数"><a href="#函数" aria-hidden="true" class="header-anchor">#</a> 函数</h2> <ol><li><p>函数的声明</p> <ul><li>作为赋值表达式的一部分,则他是函数表达式.</li> <li>如果是函数体的一部分则他是函数声明.</li> <li>函数声明也会提前,并且会优先于变量名如果变量名重复的话</li> <li><strong>函数表达式和变量声明一样</strong></li></ul></li> <li><p>函数的arguments</p> <ul><li>在非严格模式下,arguments中的值会根据形参的变换而变化</li> <li>如果传入的实参长度大于形参的长度则会把多出来的保存在arguments里面</li></ul></li> <li><p>未声明的变量</p> <ul><li>如果一个变量直接进行赋值,则这个变量则直接会变为全局变量.</li></ul></li> <li><p>构造函数其实也可以手动添加返回值</p> <ol><li>如果返回的是一个基本类型的数据js引擎会忽略这个返回自动返回this.</li> <li>如果返回的是一个对象,this失效,使用的得这个返回值.</li></ol></li> <li><p>函数中参数的传递</p> <ul><li><p>本质上都是值传递</p> <ul><li><p>基本类型</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> num1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token punctuation">;</span>
<span class="token keyword">var</span> num2 <span class="token operator">=</span> num1<span class="token punctuation">;</span>
num <span class="token operator">+=</span> <span class="token number">2</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token comment">//10;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>  <span class="token comment">//12</span>
num1将他自己的值克隆给num2<span class="token punctuation">,</span>但是他们两者之间确实相互独立的<span class="token punctuation">.</span>修改任何一个都不会影响另一个<span class="token punctuation">.</span>
</code></pre></div></li> <li><p>对象类型</p></li> <li><p>判断一个变量是不是对象,值类型的判断用typeof,引用类型的类型用instanof.</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token number">1.</span>
<span class="token keyword">var</span> obj1<span class="token operator">=</span> <span class="token punctuation">{</span>
    name <span class="token punctuation">:</span> <span class="token string">&quot;张三&quot;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> obj2 <span class="token operator">=</span> obj1<span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj2<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">//张三</span>
obj2<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj1<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">;</span>
obj1 和 obj2 共同指向同一个对象<span class="token punctuation">,</span>他们其中任何一个做出改动都会反映在另一个身上
<span class="token number">2.</span>
<span class="token keyword">function</span> <span class="token function">seeName</span><span class="token punctuation">(</span><span class="token parameter">obj</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Bob&quot;</span><span class="token punctuation">;</span>
    obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    obj<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;Tom&quot;</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> person <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Object</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">setName</span><span class="token punctuation">(</span>person<span class="token punctuation">)</span><span class="token punctuation">;</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>person<span class="token punctuation">.</span>name<span class="token punctuation">)</span>   <span class="token comment">// &quot;Bob&quot;;</span>

创建的新对象person和obj指向的是同一个对象<span class="token punctuation">,</span>当在函数内部重新创建一个对象时改变了obj的指向<span class="token punctuation">,</span>但他是在函数内部引用的一个变量对象<span class="token punctuation">,</span>会在执行立即销毁<span class="token punctuation">,</span>所person还是指向原来的对象<span class="token punctuation">.</span>
</code></pre></div></li></ul></li></ul></li></ol> <h2 id="原型"><a href="#原型" aria-hidden="true" class="header-anchor">#</a> 原型</h2> <ul><li>每个函数都有一个属性叫做<code>prototype</code> .这个<code>prototype</code> 的属性是一个对象(<em>属性的集合</em>),默认的是一个叫做constructor的属性,指向这个函数本身.</li> <li>所有的引用类型(包括数组/函数/对象)都有一个隐式原型**<strong>proto</strong>**</li></ul> <h3 id="原型规则"><a href="#原型规则" aria-hidden="true" class="header-anchor">#</a> 原型规则</h3> <ol><li>每个引用类型都有可拓展的属性({}.a, [].a, fn.a)</li> <li>每个引用类型都有隐式原型__proto__</li> <li>每个函数都有显示原型</li> <li>引用类型的隐式原型等于其构造函数的显示原型</li></ol> <h3 id="手写一个原型继承的例子"><a href="#手写一个原型继承的例子" aria-hidden="true" class="header-anchor">#</a> 手写一个原型继承的例子</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">Elem</span><span class="token punctuation">(</span><span class="token parameter">el</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elem <span class="token operator">=</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>el<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token class-name">Elem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">html</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">val</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>val<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> val
        <span class="token keyword">return</span> <span class="token keyword">this</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span>innerHTML
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token class-name">Elem</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">on</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> fn</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>elem<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>event<span class="token punctuation">,</span> fn<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">var</span> div <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Elem</span><span class="token punctuation">(</span><span class="token string">'gad1'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token string">'123213'</span><span class="token punctuation">)</span>
div<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">alert</span><span class="token punctuation">(</span><span class="token number">123123</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Object intanceof Function<span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function intanceof Object<span class="token punctuation">)</span> <span class="token comment">//true</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>Function intanceof Function<span class="token punctuation">)</span>  <span class="token comment">//true</span>
</code></pre></div><img src="/Blog/prototype.png" alt="原型链结构图"> <h3 id="原型链"><a href="#原型链" aria-hidden="true" class="header-anchor">#</a> 原型链</h3> <p>-每个对象都会在其内部初始化一个属性，就是__proto__，当我们访问一个对象的属性 时，如果这个对象内部不存在这个属性，那么他就会去__proto__里找这个属性，这个__proto__又会有自己的__proto__，于是就这样 一直找下去，也就是我们平时所说的原型链的概念。</p> <h2 id="闭包"><a href="#闭包" aria-hidden="true" class="header-anchor">#</a> 闭包</h2> <ul><li><strong>定义:</strong> 当一个函数在他的作用域之外能够访问它的作用域,并在他的作用域外执行它时,这个函数就是一个闭包.<strong>能够访问自由变量的函数</strong> <ul><li><strong>自由变量:</strong> 在函数中能够使用的,但既不是函数的参数,也不是函数能够局部能够访问的变量</li></ul></li> <li><strong>举个栗子 :</strong> 函数inner在函数outer内部,本来在他的执行环境外时访问不了 他的但是通过把他赋值给全局变量或者是当做返回值.被他引用的变量也就不会进行垃圾回收.</li> <li><strong>闭包的产生:</strong> <ul><li>执行上下文函数outer,以及执行上下文中的函数inner,inner函数执行时并访问了outer中的变量对象的值,这个时候闭包就产生了</li> <li>闭包实在函数被调用执行的时候才被确认创建的</li></ul></li> <li><strong>闭包与作用域</strong> <ul><li>作用域分为定义作用域和执行作用域, 当闭包中用到自由变量的时候最先去找的是定义作用域</li></ul></li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> fn <span class="token operator">=</span> <span class="token keyword">null</span><span class="token punctuation">;</span>
<span class="token keyword">function</span> <span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
    <span class="token keyword">function</span> <span class="token function">innnerFoo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    fn <span class="token operator">=</span> innnerFoo<span class="token punctuation">;</span> <span class="token comment">// 将 innnerFoo的引用，赋值给全局变量中的fn</span>
<span class="token punctuation">}</span>

<span class="token keyword">function</span> <span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 此处的保留的innerFoo的引用</span>
<span class="token punctuation">}</span>

<span class="token function">foo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 2</span>
</code></pre></div><p>首先<code>foo()</code>在执行完之后将innerFoo赋值给了全局变量中的fn,按照常理在在执行之后会被垃圾回收器回收,但由于赋值操作,innerFoo的引用被保留了现在,它内部所引用的变量对象也被保留下来.所以在<code>bar()</code>函数执行的时候任然可以拿到变量a的值.</p> <ul><li><strong>闭包的铺垫:</strong> <ul><li>内存空间</li> <li>执行上下文</li> <li>垃圾回收机制</li></ul></li></ul> <h3 id="闭包的两种应用"><a href="#闭包的两种应用" aria-hidden="true" class="header-anchor">#</a> 闭包的两种应用</h3> <ul><li><p><strong>函数作为返回值传递:</strong></p></li> <li><p><strong>函数作为参数传递</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> max <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">,</span>
    <span class="token function-variable function">fn</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">x</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>x <span class="token operator">&gt;</span> max<span class="token punctuation">)</span> <span class="token punctuation">{</span>
           console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>x<span class="token punctuation">)</span>  <span class="token comment">//15</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">f</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> max <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">;</span>
    <span class="token function">f</span><span class="token punctuation">(</span><span class="token number">15</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>fn<span class="token punctuation">)</span>
</code></pre></div><p><strong>必刷题:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在执行data[0]中之前,此时的全局上下文为</p> <div class="language-js extra-class"><pre class="language-js"><code>globalContext <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">VO</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        data<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span>
        i<span class="token punctuation">:</span> <span class="token number">3</span>       
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>因为js没有块级作用域时, 函数内部在访问自由变量的时候就会去父级作用域查找,
然后执行data[0]的时候他的活动对象中没有i的值,只能去全局上下文中VO读取,所有输出会是3</p> <p><strong>改成闭包:</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">var</span> data <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  data<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">i</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
data<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>此时的作用域链发生了改变</p> <div class="language-js extra-class"><pre class="language-js"><code>data<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>Context <span class="token operator">=</span> <span class="token punctuation">{</span>
    Scope<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token constant">AO</span><span class="token punctuation">,</span> 匿名函数Context<span class="token punctuation">.</span><span class="token constant">AO</span> globalContext<span class="token punctuation">.</span><span class="token constant">VO</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>

匿名函数的执行上下文
匿名函数Context <span class="token operator">=</span> <span class="token punctuation">{</span>
    <span class="token constant">AO</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
        arguments<span class="token punctuation">:</span> <span class="token punctuation">{</span>
            <span class="token number">0</span><span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
            length<span class="token punctuation">:</span> <span class="token number">1</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        i<span class="token punctuation">:</span> <span class="token number">0</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></li></ul> <h2 id="内存空间"><a href="#内存空间" aria-hidden="true" class="header-anchor">#</a> 内存空间</h2> <ul><li><strong>栈(stack):</strong> <ul><li>先进后出,后进先出.(类似于<strong>羽毛球筒</strong>)</li> <li>执行上下文的顺序借用了栈数据结构的存取方式.</li></ul></li> <li><strong>堆(heap):</strong> <ul><li>是无序的(类似于<strong>书架</strong>,只要知道书名就可以拿到想要的书)</li></ul></li> <li><strong>队列(queue):</strong> <ul><li>先进先出(FIFO)--(类似于过安检,挨个执行)</li></ul></li></ul> <h2 id="事件轮循"><a href="#事件轮循" aria-hidden="true" class="header-anchor">#</a> 事件轮循</h2> <p>![](F:\study\核心结构图\2. 事件循环.PNG)</p> <p>当前执行栈</p> <h2 id="面向对象"><a href="#面向对象" aria-hidden="true" class="header-anchor">#</a> 面向对象</h2> <h3 id="什么是面向对象"><a href="#什么是面向对象" aria-hidden="true" class="header-anchor">#</a> 什么是面向对象?</h3> <p><strong>1. 概念</strong>
js中能够表现面向对象的就是类, 相当于一个模板
<strong>2. 三要素</strong></p> <ol><li>继承: 子类继承父类</li> <li>封装: 数据的权限和保密</li></ol> <ul><li>protected: 受保护的属性只能自己和子类访问</li> <li>private: 只能自己访问</li></ul> <ol start="3"><li>多态: 同一接口不同实现, 保持子类的开放性和灵活性
<strong>3. 意义</strong>
数据结构化</li></ol> <h2 id="创建对象的多种方式"><a href="#创建对象的多种方式" aria-hidden="true" class="header-anchor">#</a> 创建对象的多种方式</h2> <h4 id="_1-工厂模式"><a href="#_1-工厂模式" aria-hidden="true" class="header-anchor">#</a> 1.工厂模式</h4> <div class="language- extra-class"><pre class="language-text"><code>function createPerson(name) {
    var o = new Object();
    o.name = name;
    o.getName = function () {
        console.log(this.name);
    };

    return o;
}

var person1 = createPerson('kevin');
</code></pre></div><p>缺点：对象无法识别，因为所有的实例都指向一个原型</p> <h4 id="_2-构造函数模式"><a href="#_2-构造函数模式" aria-hidden="true" class="header-anchor">#</a> 2 构造函数模式</h4> <div class="language- extra-class"><pre class="language-text"><code>function Person(name) {
    this.name = name;
    this.getName = function () {
        console.log(this.name);
    };
}

var person1 = new Person('kevin');
</code></pre></div><p>优点：实例可以识别为一个特定的类型</p> <p>缺点：每次创建实例时，每个方法都要被创建一次</p> <h4 id="_3-原型模式"><a href="#_3-原型模式" aria-hidden="true" class="header-anchor">#</a> 3 原型模式</h4> <div class="language- extra-class"><pre class="language-text"><code>function Person(name) {

}

Person.prototype.name = 'keivn';
Person.prototype.getName = function () {
    console.log(this.name);
};

var person1 = new Person();
</code></pre></div><p>优点：方法不会重新创建</p> <p>缺点：1. 所有的属性和方法都共享 2. 不能初始化参数</p> <h4 id="_4-组合模式"><a href="#_4-组合模式" aria-hidden="true" class="header-anchor">#</a> 4 组合模式</h4> <p>构造函数模式与原型模式双剑合璧。</p> <div class="language- extra-class"><pre class="language-text"><code>function Person(name) {
    this.name = name;
}

Person.prototype = {
    constructor: Person,
    getName: function () {
        console.log(this.name);
    }
};

var person1 = new Person();
</code></pre></div><p>优点：该共享的共享，该私有的私有，使用最广泛的方式</p> <p>缺点：有的人就是希望全部都写在一起，即更好的封装性</p> <h4 id="_5-寄生构造函数模式"><a href="#_5-寄生构造函数模式" aria-hidden="true" class="header-anchor">#</a> 5 寄生构造函数模式</h4> <div class="language- extra-class"><pre class="language-text"><code>function Person(name) {

    var o = new Object();
    o.name = name;
    o.getName = function () {
        console.log(this.name);
    };

    return o;

}

var person1 = new Person('kevin');
console.log(person1 instanceof Person) // false
console.log(person1 instanceof Object)  // true
</code></pre></div><h2 id="函数防抖节流"><a href="#函数防抖节流" aria-hidden="true" class="header-anchor">#</a> 函数防抖节流</h2> <div class="tip custom-block"><p class="custom-block-title">概述</p> <ol><li>什么是函数防抖节流?</li> <li>防抖节流的作用什么?</li></ol></div> <h3 id="定义"><a href="#定义" aria-hidden="true" class="header-anchor">#</a> 定义</h3> <p><strong>函数防抖</strong>: 以周期为单位, 如果在周期内没有触发事件, 那么事件处理函数才会执行一次,
否则重新计时.</p> <p><strong>函数节流</strong>: 在周期内给你保证事件处理函数执行一次;</p> <p><strong>区别</strong>: 以远程搜索框为例, 防抖不管你输入多少关键字,他只在停止输入的最后给你执行周期函数,
然而节流是每隔一个周期给你执行一次, 不管你有没有结束搜索, 两者是动作上区别.防抖有个停下来的动作</p> <h4 id="防抖函数封装"><a href="#防抖函数封装" aria-hidden="true" class="header-anchor">#</a> 防抖函数封装</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">/**
 * @param func 回调函数
 * @param delay 延迟执行时间
 * @returns {Function}
 */</span>
<span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">debounce</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay<span class="token punctuation">,</span> immediate</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> timer
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>timer<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">clearTimeout</span><span class="token punctuation">(</span>timer<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>immediate<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">let</span> callNow <span class="token operator">=</span> <span class="token operator">!</span>timer
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                timer <span class="token operator">=</span> <span class="token keyword">null</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
            callNow <span class="token operator">&amp;&amp;</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
            timer <span class="token operator">=</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="节流函数"><a href="#节流函数" aria-hidden="true" class="header-anchor">#</a> 节流函数</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> initDate <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">return</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">const</span> nowTime <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>nowTime <span class="token operator">-</span> initDate <span class="token operator">&gt;</span> delay<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span>
            initDate <span class="token operator">=</span> nowTime
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">let</span> <span class="token function-variable function">throttle</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">fn<span class="token punctuation">,</span> delay</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> flag <span class="token operator">=</span> <span class="token boolean">true</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>flag<span class="token punctuation">)</span> <span class="token keyword">return</span>
    flag <span class="token operator">=</span> <span class="token boolean">false</span>
    <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token function">fn</span><span class="token punctuation">(</span><span class="token operator">...</span>args<span class="token punctuation">)</span>
      flag <span class="token operator">=</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span> delay<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="compose函数"><a href="#compose函数" aria-hidden="true" class="header-anchor">#</a> compose函数</h2> <p><strong>介绍</strong>: 将需要嵌套的函数进行平铺, 一个函数的返回值作为另一个函数的参数</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// let calculate = x =&gt; (x + 10) * 10</span>
<span class="token keyword">let</span> <span class="token function-variable function">add</span> <span class="token operator">=</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> x <span class="token operator">+</span> <span class="token number">10</span>
<span class="token keyword">let</span> <span class="token function-variable function">multiply</span> <span class="token operator">=</span> <span class="token parameter">y</span> <span class="token operator">=&gt;</span> y <span class="token operator">*</span> <span class="token number">10</span>

<span class="token comment">// let calculate  = x =&gt; multiply(add(x))</span>

<span class="token comment">// console.log(calculate(10))</span>

<span class="token comment">// let compose = (f, g) =&gt; x =&gt; f(g(x))</span>



<span class="token comment">// let compose = (...args) =&gt; {</span>
<span class="token comment">//     return (x) =&gt; {</span>
<span class="token comment">//         return args.reduceRight((res, cb) =&gt; {</span>
<span class="token comment">//             return cb(res)</span>
<span class="token comment">//         }, x)</span>
<span class="token comment">//     }</span>
<span class="token comment">// }</span>

<span class="token keyword">let</span> <span class="token function-variable function">compose</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token operator">...</span>args</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token parameter">x</span> <span class="token operator">=&gt;</span> args<span class="token punctuation">.</span><span class="token function">reduceRight</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res<span class="token punctuation">,</span> cb</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">cb</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span><span class="token punctuation">,</span> x<span class="token punctuation">)</span>

<span class="token keyword">let</span> calculate <span class="token operator">=</span> <span class="token function">compose</span><span class="token punctuation">(</span>multiply<span class="token punctuation">,</span> add<span class="token punctuation">)</span>

console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre></div><h2 id="缓存函数"><a href="#缓存函数" aria-hidden="true" class="header-anchor">#</a> 缓存函数</h2> <p><strong>介绍</strong>: 缓存函数是指将上次的计算结果缓存起来, 当下次调用时, 如果遇到相同的参数, 就直接返回缓存中的数据</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> <span class="token function-variable function">memorize</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">func</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> cache <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">let</span> key <span class="token operator">=</span> <span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">stringify</span><span class="token punctuation">(</span>arguments<span class="token punctuation">)</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">func</span><span class="token punctuation">.</span><span class="token function">apply</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> arguments<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">return</span> cache<span class="token punctuation">[</span>key<span class="token punctuation">]</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="柯里化函数"><a href="#柯里化函数" aria-hidden="true" class="header-anchor">#</a> 柯里化函数</h2> <ol><li><strong>介绍</strong>: 柯里化函数是一种使用多个参数的一个函数, 转换为一系列使用一个参数的函数的技术</li> <li><strong>使用</strong>:</li></ol> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 检测字符串中是否空格</span>
<span class="token keyword">let</span> <span class="token function-variable function">matching</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reg<span class="token punctuation">,</span> str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">matching</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">'hello world'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token function">matching</span><span class="token punctuation">(</span><span class="token regex">/\s+/g</span><span class="token punctuation">,</span> <span class="token string">'test_demo'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token comment">// 使用柯里化进行处理</span>
<span class="token keyword">let</span> <span class="token function-variable function">curry</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">reg</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">(</span><span class="token parameter">str</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>
<span class="token keyword">let</span> hasSpace <span class="token operator">=</span> <span class="token function">curry</span><span class="token punctuation">(</span><span class="token operator">/</span>\s<span class="token operator">+</span><span class="token operator">/</span>g'<span class="token punctuation">)</span>
</code></pre></div></div> <!----> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">上次更新: </span> <span class="time">8/20/2020, 9:09:18 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Blog/views/accumulate/CSS相关.html" class="prev">
          CSS相关
        </a></span> <span class="next"><a href="/Blog/views/accumulate/源码分析.html">
          源码分析
        </a>
        →
      </span></p></div> </main> <div class="valine-wrapper" data-v-0162251c><div id="valine" data-v-0162251c></div></div></div> <div class="back-to-ceiling" style="right:1rem;bottom:3rem;width:2.5rem;height:2.5rem;border-radius:.25rem;line-height:2.5rem;background-color:rgba(231, 234, 241,.5);display:none;" data-v-d0bfeaa4 data-v-d0bfeaa4><i class="iconfont reco-up" data-v-d0bfeaa4></i></div></div></div></div><div class="global-ui"></div></div>
    <script src="/Blog/assets/js/app.a66dfa13.js" defer></script><script src="/Blog/assets/js/5.3af05e9e.js" defer></script><script src="/Blog/assets/js/1.b259d1a7.js" defer></script><script src="/Blog/assets/js/11.0d7f9ba6.js" defer></script>
  </body>
</html>
